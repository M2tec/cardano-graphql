FROM dpage/pgadmin4
USER root

ARG NETWORK
ARG POSTGRES_DB
ARG POSTGRES_USER
ARG POSTGRES_PASSWORD

ENV NETWORK=${NETWORK}
ENV PGADMIN_SERVER_JSON_FILE=/pgadmin4/servers.json
ENV PGADMIN_CONFIG_SERVER_MODE=False
ENV PGADMIN_CONFIG_MASTER_PASSWORD_REQUIRED=False
ENV PGADMIN_DEFAULT_EMAIL=testing@example.io
ENV PGADMIN_DEFAULT_PASSWORD=12345678
COPY install_pgpass.sh /
RUN chmod +x /install_pgpass.sh

COPY init.sh /
RUN chmod +x /init.sh

USER root
ENTRYPOINT ["/init.sh"]
EXPOSE 80